{% load static %}
{% load pagination_tag %}

{% block extra_css %}
<!-- calendar -->
<link rel="stylesheet" href="{% static 'calendar/lib/main.css' %}">
{% endblock extra_css %}

{% block conteudo %}
<div class="row">

  <div class="col-xl">
    <div class="card mb-4">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Agenda dos Veículos</h5>
        </div>
        <div class="card-body">
          <div class="table-responsive text-nowrap">
            <div id="calendar" class="container" style="padding: auto;">
            </div>
            <br>
         </div>
        </div>
      </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<!-- calendar -->
<script src="{% static 'calendar/lib/main.js' %}"></script>
<script src="{% static 'calendar/lib/locales-all.js' %}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function(){
    var calendarUI = document.getElementById("calendar");
    var calendar = new FullCalendar.Calendar(calendarUI, {
      events: [
        {% for agenda in object_list %}
          {
            Descrição: "{{ agenda.descricao }}",
            Placa: "{{ agenda.veiculo.placa }}",
            Data: "{{ agenda.data_saida |date:"D-M-Y" }}",
            Saída: "{{ agenda.hora_saida }}"
          },
        {% endfor%}  
      ]
    });
    calendar.render();
    calendar.setOption('locale', 'pt-br')
  });
</script>
{% endblock extra_js %}